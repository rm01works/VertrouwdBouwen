# Production values for vertrouwd-bouwen
# Overrides values.yaml with production-specific settings

env: prod

global:
  imagePullSecrets:
    - name: github-registry
  namespace: default

api:
  enabled: true
  image:
    pullPolicy: Always
  
  replicas: 2
  revisionHistoryLimit: 5
  
  service:
    type: ClusterIP
    port: 80
    targetPort: 5000
  
  container:
    port: 5000
    hostname: 0.0.0.0
  
  env:
    # JWT_SECRET must be provided via secret in production
    jwtSecret:
      valueFrom:
        secretKeyRef:
          name: api-secrets
          key: jwt-secret
    corsOrigin: "https://vertrouwdbouwen.com"
    databaseUrl:
      valueFrom:
        secretKeyRef:
          name: beun-db-app
          key: uri
  
  ingress:
    enabled: true
    hostname: "api.vertrouwdbouwen.com"
    gateway:
      name: shared
      namespace: default
    certificate:
      name: gateway-tls
      namespace: default
  
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi

frontend:
  enabled: true
  image:
    pullPolicy: Always
  
  replicas: 2
  revisionHistoryLimit: 5
  
  service:
    type: ClusterIP
    port: 80
    targetPort: 3000
  
  container:
    port: 3000
    hostname: 0.0.0.0
  
  env:
    apiBaseUrl: "https://api.vertrouwdbouwen.com"
  
  ingress:
    enabled: true
    hostname: "vertrouwdbouwen.com"
    gateway:
      name: shared
      namespace: default
    certificate:
      name: gateway-tls
      namespace: default
  
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi

database:
  enabled: true
  name: beun-db
  
  instances: 1
  
  storage:
    size: 5Gi
    storageClass: longhorn-local
  
  primaryUpdateStrategy: unsupervised
  primaryUpdateMethod: switchover
  
  replicationSlots:
    highAvailability:
      enabled: true
  
  resources:
    requests:
      cpu: 250m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi

# TLS Configuration - Production
tls:
  enabled: true
